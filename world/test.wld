place Room1 {
    """
        name: Room1
        description: You are in room One
    """

    objects {
        apple
    }
}

place Room2 {
    """
        name: Room2
        description: You are in room Two, entrance to the room Four is blocked by door  
    """

    objects {}

    blockade {
        is_door_opened, N
    }
}

place Room3 {
    """
        name: Room3
        description: You are in room Three
    """
    
    objects {
        chest
    }
}

place Room4 {
    """
        name: Room4
        description: You are in room Four
    """

    objects {}
}

object_defs {
    object apple {
        """
            name: an apple
            description: Big green apple
        """
        pickable: true
    }
    object chest {
        """
            name: small chest
            description: Small chest for jewelery
        """

        objects {
            gold_key
        }
        pickable: false
        commands: {
            on_command examine {
                move: gold_key
                flag: examined_chest
                message: "You have found golden key."
            }
        }
    }
    object gold_key {
        """
            name: gold key
            description: golden key that has cross on it
        """
        pickable: true
    }
}

connections {
    Room1, N, Room2
    Room2, W, Room3
    Room2, N, Room4
}

flags {
    flag is_door_unlocked {
        activated: false
        false_msg: "You don't have key to unlock it."
        true_msg: "You have unlocked the door."
        require: gold_key
    }
    flag is_door_opened {
        activated: false
        false_msg: "Door blocks your path."
        true_msg: "You have opened the door."
        dependencies: {
            is_door_unlocked: true
        }
    }
    flag examined_chest {
        activated: false
        true_msg: "Nothing cathes your eye."
    }
}

player {
    position: Room1
    inventory {}
}